<!DOCTYPE html>

<html>

<head>
	<meta charset='utf-8' />
	<title>Map Comparison</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
	<script src='city.js'></script>
	<script src='info_popup.js'></script>
	<script src="https://kit.fontawesome.com/7abfd05b6d.js" crossorigin="anonymous"></script>

	<link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet'>

	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="mapUI.css">
	<link rel="stylesheet" href="info_popup.css">
</head>

<body>

	<!-- START OF WEB ATLAS -->
	<div class="atlas-title">
		<p>
			CAMMM Web Atlas Prototype
		</p>
		<span style="font-size: 1em; color: #d81b60;">
			<i class="fas fa-info-circle" onclick="show_popup(1);"></i>
		</span>
	</div>
	<div>
		<a href="uiTesting.html">UI Testing HTML Mockup Page</a>
	</div>
	<button id="printButton" onclick="window.print();">Print</button>
	<!-- <input type="button" id="exportCitation" onclick="location.href='https://google.com';" value="Go to Google" /> -->
	<button id="exportCitation" onclick="{location.href='Reference.ris'; show_citation();}">Export Citation</button>
	<div id="citationText" style="display: none;">
		<div><p>APA: Cucuzzella, C., Gauthier, P., Nizar, F., & Ortiz Meraz, O. (2021). CAMMM Web Atlas 0.3. CAMMM Web Atlas 0.3.</p></div>
		<div><p>MLA: Cucuzzella, Carmela, et al. “CAMMM Web Atlas 0.3.” CAMMM Web Atlas 0.3, 2021.</p></div>
		<div><p>CHICAGO: Cucuzzella, Carmela, Pierre Gauthier, Firdous Nizar, and Omar Ortiz Meraz. 2021. “CAMMM Web Atlas 0.3.” CAMMM Web Atlas 0.3. 2021.</p></div>	
	</div>


	<!-- START OF INFO AREA -->

	<!-- START OF INFO POP UP 1 -->
	<div class="info_popup_area">

		<div class="hover_info_popup" id="hover_info_popup1" style="display: none;">
			<span class="helper"></span>
			<div>
				<div class="popupCloseButton" onclick="hide_popup(1);">&times;</div>
				<h3>About</h3>
				<p>Welcome to the CAMMM Web Atlas, developed by IDEAS-BE (Integrated Design and Sustainability for the Built Environment). 
					This tool is a work-in-progress and part of the research project titled, 
					CoLLaboratoire for Activating Multi-modal Mobility (CAMMM): One Public Space at a Time, in order to compare the transit 
					systems between each city and critically reflect on mobility in the city. 
					<br/>
					<br/><strong>License</strong> 
					<br/>Add license here
					<br/>
					<br/><strong>Disclaimer of city data sources + link to resources for all cities in the Atlas</strong> 
					<br/>
					<br/><strong>Author Information</strong> 
					<br/>CC, PG, OOM, FN 
					<br/>
					<br/><strong>Processing Tool Information</strong> 
					<br/>Brief Description of Tool and description of the queries. 
					<br/>
					<br/><strong>Related research</strong> 
					<br/>List of links to PG research + student uses & feedback, etc. 
					<br/>
					<br/><strong>Wiki-Docs</strong>  
					<br/>Add link here 
					<br/>
					<br/>DISCLAIMER: The data shown in the atlas reflects the information provided in GTFS format by the transport 
					agencies managing the public transit locally in each city. These files are obtained from the official websites 
					corresponding to each city, or internet aggregators. Therefore, accuracy of the data displayed is out of the scope 
					of this research tool. The authors cannot guarantee the precision of this data.</p>
			</div>
		</div>
	</div>
	<!-- END OF INFO POP UP 1 -->
	
	<!-- START OF INFO POP UP 2 -->
	<div class="info_popup_area">

		<div class="hover_info_popup" id="hover_info_popup2" style="display: none;">
			<span class="helper"></span>
			<div>
				<div class="popupCloseButton" onclick="hide_popup(2);">&times;</div>
				<h3>Cities Selection</h3>
				<p><strong>Extent and Scope of Atlas</strong> 
					<br>Description of the cities under analysis, cities with similar population to MTL.  
					<br>
					<br><strong>Catalogue of Processed Cities </strong>
					<br>Add explanation of the following selected cities: 
					<ul>
						<li>Montreal</li>
						<li >Barcelona</li>
						<li>Budapest</li>
						<li>Quebec City</li>
						<li>Vienna</li>
					</ul>
					<br>
					<br><strong>Live list of Cities-in-progress</strong>
					<br>Add explanation of upcoming cities: 
					<ul>
						<li>Laval</li>
						<li>Melbourne</li>
						<li>Stockholm</li>
						<li>Oslo</li>
					</ul>
				</p>			
			</div>
		</div>
	</div>
	<!-- END OF INFO POP UP 2 -->

	<!-- START OF INFO POP UP 3 -->
	<div class="info_popup_area">

		<div class="hover_info_popup" id="hover_info_popup3" style="display: none;">
			<span class="helper"></span>
			<div style="overflow-y: scroll; height: 500px;">
				<div class="popupCloseButton" onclick="hide_popup(3);">&times;</div>
				<h3>Map Controls</h3>
				<p>Introduction of how to use these controls: left-to-right, etc. (written in reference to snapshot) 
					<br>
					<br><em style="color: lightcoral;">Labelled Snapshot </em>
					<br>
					<br><strong>Select Query</strong> 
					<br>Add explanation on why we are selecting a query (need to add citations) 
					<br>
					<br>The query list includes: 
					<ol>
						<li>Centrality degree is associated with how accessible the rest of the network is, 
							with respect to a given node. This means that this query evaluates the ease of a 
							trip from the given node to any other point in the network and vice versa.</li>
						<li>Closeness degree measures the desirability of a given node in being included in 
							a particular trip inside the network. A node with a higher value of closeness centrality 
							will imply that it is more frequented during trips inside the network.</li>
					</ol>
					<br>
					<br><strong>Select Analysis Type</strong>
					<br>Add explanation on why we are selecting a type of analysis 
					<br>
					<br>The types of analysis include: 
					<ol>
						<li>Direct: queries applied directly applied to the transit network.</li>
						<li>Node: queries applied to nodes that aggregates points of access/transfer/connections 
							in the network based on their geography.</li>
					</ol>
					<br>
					<br><strong>Select Display Type</strong>
					<br>Add explanation on why we are toggling the display type (explain what the layers mean) 
					<br>
					<br>The types of display of the data points on the map include: 
					<ol>
						<li>Stacked: Shows the data points on the map in incremental layers based on the 
							value of the corresponding slider. For example, if the slider is on “3”, the 
							map would display data points from layers 1, 2 and 3.</li>
						<li>Single: Shows the data points on the map in individual layers based on the 
							value of the corresponding slider. For example, if the slider is on “3”, the 
							map would display data points from layer 3 only.</li>
					</ol>
					<br>
					<br><strong>Slider and Legend (TBD)</strong> 
					<br>This slider is an interactive extension of the selected display type. The legend 
					(color gradient) is a visual reflection of the selected query.
				</p>
			</div>
		</div>
	</div>
	<!-- END OF INFO POP UP 3 -->

	<!-- START OF INFO POP UP 4 -->
	<div class="info_popup_area">

		<div class="hover_info_popup" id="hover_info_popup4" style="display: none;">
			<span class="helper"></span>
			<div>
				<div class="popupCloseButton" onclick="hide_popup(4);">&times;</div>
				<h3>City Metrics</h3>
				<p>This contains a tabular description of the public transit networks servicing the city under analysis. 
					<br>
					<br>The available transit systems for each city are linked to the following signage: 
					<ol>
						<li><i class="fas fa-bus"></i> : Bus Network</li>
						<li><i class="fas fa-train"></i>  : Heavy Rail, Trains, Interurbans, etc...</li>
						<li><i class="fas fa-subway"></i>  : Metro/Subway systems, etc.</li>
						<li><i class="fas fa-tram"></i>  : Tram, other types of light rail</li>
						<li><i class="fas fa-taxi"></i>  : Other types of transportation: Funicular, Fixed route taxi service, Carriage, etc...</li>
					</ol> 
					<br>
					<br>The list of descriptors for each transit system includes: 	 
					<ul>
						<li>Number of stops/stations, or points of access to the network </li>
						<li>Number of lines in the system </li>
						<li>Average distance between stops/stations</li>
					</ul>
					<br>
					<br>DISCLAIMER: The data shown in the atlas reflects the information provided in GTFS format 
					by the transport agencies managing the public transit locally in each city. These files are 
					obtained from the official websites corresponding to each city, or internet aggregators. 
					Therefore, accuracy of the data displayed is out of the scope of this research tool. 
					The authors cannot guarantee the precision of this data.
				</p>
			</div>
		</div>
	</div>
	<!-- END OF INFO POP UP 4 -->

	<!-- END OF INFO AREA -->


	<!-- START OF MAP CONTROLS AREA -->
	<div class="map-controls-area group">
		<!-- 	::before -->
		<!-- START OF LEFT CONTROLS -->
		<div class="dropDown1">

			<!-- START OF CITY 1 LIST -->
			<div class="atlas-city1">
				<select id="cityList1" onchange="getSelectedCity(1);">
				</select>
				<button id ="city1Reset" onclick="resetCity(1);">Reset</button>
				<span style="font-size: 1em; color: #d81b60;">
					<i class="fas fa-info-circle" onclick="show_popup(2);"></i>
				</span>
			</div>
			<div class="emptyspace"></div>
			<!-- END OF CITY 1 LIST -->

		</div>
		<!--END OF LEFT CONTROLS -->

		<!-- START OF RIGHT CONTROLS -->
		<div class="dropDown2">

			<!-- START OF CITY 2 LIST -->
			<div class="atlas-city2">
				<select id="cityList2" onchange="getSelectedCity(2);">
				</select>
				<button id ="city2Reset" onclick="resetCity(2);">Reset</button>
				<span style="font-size: 1em; color: #d81b60;">
					<i class="fas fa-info-circle" onclick="show_popup(2);"></i>
				</span>
			</div>
			<div class="emptyspace"></div>
			<!-- END OF CITY 2 LIST -->


		</div>
		<!--END OF RIGHT CONTROLS -->
		<!-- 	::after -->
	</div>
	<!--END OF MAP CONTROLS AREA -->

	<!-- START OF MAP 1 CONTROLS TABLE -->
	<div id="filter-group1" class="filter-group">
		<table id="map1controls">
			<tr>
				<td class="mapCellsType1">
					<!-- START OF DIRECT/NODE TOGGLE 1 -->
					<div id="toggleCity1">
					</div>
					<!-- END OF DIRECT/NODE TOGGLE 1 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF QUERY BUTTONS 1 -->
					<form name="sampleForm" id="radioForm1">
					</form>
					<!-- END OF QUERY BUTTONS 1 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF CATEGORY/CUMULATIVE TOGGLE 1 -->
					<div id="toggleCategoryCumulative1">
					</div>
					<!-- END OF CATEGORY/CUMULATIVE TOGGLE 1 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF MAP LEGEND AND SLIDER 1 -->			  
					<div id="mapLegend1">
					</div>
					<!-- END OF MAP LEGEND AND SLIDER 1 -->	
				</td>
				<td class="mapCellsType2">
					<span class="popUp3" style="font-size: 1em; color: #d81b60; display: none;">
						<i class="fas fa-info-circle" onclick="show_popup(3);"></i>
					</span>
				</td>
			</tr>
		</table>
	</div>
	<!-- END OF MAP 1 CONTROLS TABLE -->
	<!-- START OF MAP 2 CONTROLS TABLE -->
	<div id="filter-group2" class="filter-group">
		<table id="map2controls">
			<tr>
				<td class="mapCellsType1">
					<!-- START OF DIRECT/NODE TOGGLE 2 -->
					<div id="toggleCity2">
					</div>
					<!-- END OF DIRECT/NODE TOGGLE 2 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF QUERY BUTTONS 2 -->
					<form name="sampleForm" id="radioForm2">
					</form>
					<!-- END OF QUERY BUTTONS 2 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF CATEGORY/CUMULATIVE TOGGLE 2 -->
					<div id="toggleCategoryCumulative2">
					</div>
					<!-- END OF CATEGORY/CUMULATIVE TOGGLE 2 -->
				</td>
				<td class="mapCellsType1">
					<!-- START OF MAP LEGEND AND SLIDER 2 -->			  
					<div id="mapLegend2">
					</div>
					<!-- END OF MAP LEGEND AND SLIDER 2 -->	
				</td>
				<td class="mapCellsType2">
					<span class="popUp3" style="font-size: 1em; color: #d81b60; display: none;">
						<i class="fas fa-info-circle" onclick="show_popup(3);"></i>
					</span>
				</td>
			</tr>
		</table>
	<!-- END OF MAP 2 CONTROLS TABLE -->
	<!-- START OF MAP 1 BOX-->	
	</div>
	<div class="mapbox1" id="map1div">
		<div id='map1'>
		</div>
	</div>
	<!-- END OF MAP 1 BOX-->

	<!-- START OF MAP 2 BOX-->

	<div class="mapbox2" id="map2div">
		<div id='map2'>
		</div>
	</div>
	<!-- END OF MAP 2 BOX -->

	<!-- START OF CITY METRICS TABLES -->

	<div class="emptyspace-table"></div>
	<div id="city1table" class="oput" ></div>
	<div id="city2table" class="oput" ></div>


	<!-- END OF CITY METRICS TABLES -->

	<!-- START OF FUNCTION TO DISPLAY CITY METRICS JSON -->
	<script>

		var obj;
		var a = new XMLHttpRequest();  // This is creating the variable that reads the JSON file
		function readMetrics(){
			a.open('GET', "CityMetrics2.json", true);  // This is reading the JSON FILE 
			console.log("Reading the City Metrics file to load JSON");

			a.onreadystatechange = function () {  //When the JSON file is open it starts a function 

			if (this.readyState == 4) {     //When the file is read, code 4, this IF is True
				obj = JSON.parse(this.responseText);   // This line parses the response text which is a string into a proper JSON 
				newJson(obj);
			}
			}

			a.send();        // Closes the XMLHttpRequest   
		}
		setTimeout(readMetrics, 700);
		 
		                                      
	</script>

	<!-- END OF FUNCTION TO DISPLAY CITY METRICS JSON -->

	<!-- END OF WEB ATLAS -->
</body>

</html>