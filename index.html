<!DOCTYPE html>

<html>

<head>
	<meta charset='utf-8' />
	<title>Map Comparison</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
	<script src='city.js'></script>
	<script src='info_popup.js'></script>
	<script src="https://kit.fontawesome.com/7abfd05b6d.js" crossorigin="anonymous"></script>

	<link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet'>

	<link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="mapUI.css">
	<link rel="stylesheet" href="info_popup.css">
</head>

<body>

	<!-- START OF WEB ATLAS -->
	<div class="atlas-title">
		<p>
			CAMMM Web Atlas Prototype
		</p>
		<span style="font-size: 1em; color: #d81b60;">
			<i class="fas fa-info-circle" onclick="show_popup();"></i>
		</span>

	</div>
	<button id="printButton" onclick="window.print();">Print</button>

	<!-- START OF INFO AREA -->
	<div class="info_popup_area">

		<div class="hover_info_popup" id="hover_info_popup" style="display: none;">
			<span class="helper"></span>
			<div>
				<div class="popupCloseButton" onclick="hide_popup();">&times;</div>
				<p>Adding more info on CAMMM Web Atlas soon...<br />Stay tuned!</p>
			</div>
		</div>
	</div>

	<!-- END OF INFO AREA -->


	<!-- START OF MAP CONTROLS AREA -->
	<div class="map-controls-area group">
		<!-- 	::before -->
		<!-- START OF LEFT CONTROLS -->
		<div class="left-map-controls">

			<!-- START OF CITY 1 LIST -->
			<div class="atlas-city1">
				<select id="cityList1" onchange="getSelectedCity(1);">
				</select>
				<button id ="city1Reset" onclick="resetCity(1);">Reset</button>
				<span style="font-size: 1em; color: #d81b60;">
					<i class="fas fa-info-circle" onclick="show_popup();"></i>
				</span>
			</div>
			<div class="emptyspace"></div>
			<!-- END OF CITY 1 LIST -->

		</div>
		<!--END OF LEFT CONTROLS -->

		<!-- START OF RIGHT CONTROLS -->
		<div class="right-map-controls">

			<!-- START OF CITY 2 LIST -->
			<div class="atlas-city2">
				<select id="cityList2" onchange="getSelectedCity(2);">
				</select>
				<button id ="city2Reset" onclick="resetCity(2);">Reset</button>
				<span style="font-size: 1em; color: #d81b60;">
					<i class="fas fa-info-circle" onclick="show_popup();"></i>
				</span>
			</div>
			<div class="emptyspace"></div>
			<!-- END OF CITY 2 LIST -->


		</div>
		<!--END OF RIGHT CONTROLS -->
		<!-- 	::after -->
	</div>
	<!--END OF MAP CONTROLS AREA -->

	<!-- START OF MAP1 -->
	<div style="width: 506px;">
		<nav id="filter-group" class="filter-group">
				<table id="map1controls">
					<tr>
						<td>
							<!-- START OF DIRECT/NODE TOGGLE 1 -->
							<div id="toggleCity1">
							</div>
							<!-- END OF DIRECT/NODE TOGGLE 1 -->
						</td>
						<td>
							<!-- START OF QUERY BUTTONS 1 -->
							<form name="sampleForm" id="radioForm1">
							</form>
							<!-- END OF QUERY BUTTONS 1 -->
						</td>
						<td>
							<!-- START OF CATEGORY/CUMULATIVE TOGGLE 1 -->
							<div id="toggleCategoryCumulative1">
							</div>
							<!-- END OF CATEGORY/CUMULATIVE TOGGLE 1 -->
						</td>
						<td>
							<!-- START OF MAP LEGEND AND SLIDER 1 -->			  
							<div id="mapLegend1">
							</div>
							<!-- END OF MAP LEGEND AND SLIDER 1 -->	
						</td>
						<td>
							<span class="popUp3" style="font-size: 1em; color: #d81b60; display: none;">
								<i class="fas fa-info-circle" onclick="show_popup();"></i>
							</span>
						</td>
					</tr>
				</table>
	</div>
	<div class="mapbox1" id="map1div">
		<div id='map1'>
		</div>

	</div>
	<!-- END OF MAP1 -->

	<!-- START OF MAP2 -->
	<!-- START OF QUERY BUTTONS 2 -->
	<div style="width: 506px;">
		<nav id="filter-group" class="filter-group">
			<span class="popUp3" style="font-size: 1em; color: #d81b60; display: none;">
				<i class="fas fa-info-circle" onclick="show_popup();"></i>
			</span>
			<!-- START OF DIRECT/NODE TOGGLE 2 -->
			<div id="toggleCity2">
			</div>
			<!-- END OF DIRECT/NODE TOGGLE 2 -->
			<form name="sampleForm" id="radioForm2">
			</form>
		<!-- END OF QUERY BUTTONS 2 -->
		<!-- START OF CATEGORY/CUMULATIVE TOGGLE 2 -->
		<div id="toggleCategoryCumulative2">
		</div>
		<!-- END OF CATEGORY/CUMULATIVE TOGGLE 2 -->
		<!-- START OF MAP LEGEND AND SLIDER 2 -->	
		<div id="mapLegend2"></div>
		<!-- END OF MAP LEGEND AND SLIDER 2 -->
	</div>

	<div class="mapbox2" id="map2div">
		<div id='map2'>
		</div>
	</div>
	<!-- END OF MAP2 -->

	<!-- END OF MAPBOX -->

	<div class="emptyspace-table"></div>
	<div id="city1table" class="oput"></div>

	<div id="city2table" class="oput"></div>


	<!-- START OF FUNCTION TO DISPLAY CITY METRICS JSON -->
	<script>

		var obj;
		var a = new XMLHttpRequest();  // This is creating the variable that reads the JSON file
		function readMetrics(){
			a.open('GET', "CityMetrics2.json", true);  // This is reading the JSON FILE 
			console.log("Reading the City Metrics file to load JSON");

			a.onreadystatechange = function () {  //When the JSON file is open it starts a function 

			if (this.readyState == 4) {     //When the file is read, code 4, this IF is True
				obj = JSON.parse(this.responseText);   // This line parses the response text which is a string into a proper JSON 
				newJson(obj);
			}
			}

			a.send();        // Closes the XMLHttpRequest   
		}
		setTimeout(readMetrics, 3000);
		 
		                                      
	</script>

	<!-- END OF FUNCTION TO DISPLAY CITY METRICS JSON -->

	<!-- END OF WEB ATLAS -->
</body>

</html>