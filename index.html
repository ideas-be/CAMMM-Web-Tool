<!DOCTYPE html>

<html>
<head>
<meta charset='utf-8' />
<title>Map Comparison</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
<script src='script.js'></script>
<script src='city.js'></script>

<link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' >

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="mapUI.css">
</head>
<body>

	<!-- START OF WEB ATLAS -->
	<div class="atlas-title">
		<h2>
			CAMMM Web Atlas
		</h2>
		<a href="toggle.html">Toggle Example</a>
	</div>
	
	<!-- START OF TEST TOGGLE -->
	<div>
		<p class="toggleText">Hi     
			<label class="switch">
				<input type="checkbox" id="toggBtntest" onchange="getToggleTest();">
				<span class="slider round"></span>
			</label>     Bye
		</p>
	</div>
	<!-- END OF TEST TOGGLE -->
	
	<!-- START OF MAP CONTROLS AREA -->
	<div class="map-controls-area group">
<!-- 	::before -->
	<!-- START OF LEFT CONTROLS -->
	<div class="left-map-controls">
	
		<!-- START OF CITY 1 LIST -->
	<div class="atlas-city1">
		<h3>City 1</h3>
		<select id="cityList1" onchange="getSelectedCity1();">
      </select>
	</div>
	<div class="emptyspace"></div>
	<!-- END OF CITY 1 LIST -->
		
	</div> <!--END OF LEFT CONTROLS -->
	
	<!-- START OF RIGHT CONTROLS -->
	<div class="right-map-controls">
	
		<!-- START OF CITY 2 LIST -->
	<div class="atlas-city2">
		<h3>City 2</h3>
		<select id="cityList2" onchange="getSelectedCity2();">
      </select>
	</div>
	<div class="emptyspace"></div>
	<!-- END OF CITY 2 LIST -->
	
		
	</div> <!--END OF RIGHT CONTROLS -->
<!-- 	::after -->
	</div> <!--END OF MAP CONTROLS AREA -->
	
	<!-- START OF MAP1 -->
	<div class="mapbox1" id="map1div">
		<!-- <div class='maplabel'>Map 1</div> -->
  		<div id='map1'>
			<nav id="filter-group" class="filter-group">
				<form name = "sampleForm" id="radioForm1">
				</form>
				<!-- START OF DIRECT/NODE TOGGLE 1 -->
				<div>
					<p class="toggleText">Direct     
						<label class="switch">
						<input type="checkbox" id="toggBtn1" onchange="getToggleValue(1);">
						<span class="slider round"></span>
						</label>     Node
					</p>
				</div>
		</div>
		
	</div>
	<!-- END OF MAP1 -->	

	<!-- START OF MAP2 -->	
	<div class="mapbox2" id= "map2div" >
		<!-- <div class='maplabel'>Map 2</div> -->
  		<div id='map2'>
			<nav id="filter-group" class="filter-group">
				<form name = "sampleForm" id="radioForm2">
				</form>
				<!-- START OF DIRECT/NODE TOGGLE 2 -->
				<div>
					<p class="toggleText">Direct     
						<label class="switch">
						<input type="checkbox" id="toggBtn2" onchange="getToggleValue(2);">
						<span class="slider round"></span>
						</label>     Node
					</p>
				</div>
	  	</div>
	</div>
	<!-- END OF MAP2 -->

	<!-- END OF MAPBOX -->
	
	<div class="emptyspace-table"></div>
		<div id="city1table" class="oput"></div>
		<div id="city2table" class="oput"></div>
	
	
<!-- START OF FUNCTION FOR CITY 1 SELECTION  -->
	<script> 
		function getSelectedCity1(){
			
			var selectedCity = document.getElementById("cityList1").value;

			if(selectedCity != "Select City"){

				readCityJson(selectedCity, 1);
				CityDataDisplay(selectedCity);
				
				var map1div = document.getElementById('map1div');

				var map1display = map1div.style.display;
				if(map1display == 'none')
					{
						map1div.style.display = 'block';
					}
			}
			
			}
		getSelectedCity1();
	</script>
	<!-- END OF FUNCTION FOR CITY 1 SELECTION  -->
	
	<!-- START OF FUNCTION FOR TOGGLE 1 SELECTION  -->
	<script>

	</script>
<!-- END OF FUNCTION FOR TOGGLE 1 SELECTION  -->
	
	<!-- START OF FUNCTION FOR CITY 2 SELECTION  -->
	<script> 
		function getSelectedCity2(){
			var selectedCity = document.getElementById("cityList2").value;

			if(selectedCity != "Select City"){
				
				readCityJson(selectedCity, 2);
				CityDataDisplay(selectedCity);

				var map2div = document.getElementById('map2div');
				
				var map2display = map2div.style.display;
				if(map2display == 'none')
					{
						map2div.style.display = 'block';
					}
			}
		}
		getSelectedCity2();
	</script>
	<!-- END OF FUNCTION FOR CITY 2 SELECTION  -->
	

<!-- START OF FUNCTION TO DISPLAY CITY METRICS JSON -->
<script>

	var obj;
    var a = new XMLHttpRequest();  // This is creating the variable that reads the JSON file
    a.open('GET',"CityMetrics.json", true); // This is reading the JSON FILE 
    a.onreadystatechange = function(){  //When the JSON file is open it starts a function 
        
        if(this.readyState == 4){     //When the file is read, code 4, this IF is True
            obj = JSON.parse(this.responseText);   // This line parses the response text which is a string into a proper JSON 
            // initJson(obj, false, "InitJson is called when the JSON is read");
			newJson(obj);
            // console.log(obj);   // TADAAAAAAA
        }
    }

	function getToggleValue(toggNum){
		var toggleID = "toggBtn"+toggNum;
		var selFormAnalysis = document.getElementById(toggleID).checked;
		console.log("selFormAnalysis "+selFormAnalysis);
        initJson(obj, selFormAnalysis,"InitJson is called inside of get toggle function");
						// AnalysisUpdater1(selFormAnalysis);
	}

	function getToggleTest(){
        var selToggle = document.getElementById(toggBtntest).checked;
		console.log("selToggle:", selToggle);
        if(selToggle){
            console.log("Bye");
        }else{
            console.log("Hi");
        }
    }

    a.send();        // Closes the XMLHttpRequest                                         
</script>

<!-- END OF FUNCTION TO DISPLAY CITY METRICS JSON -->

<!-- END OF WEB ATLAS -->
</body>
</html>
